/*global confirm*//*global wp,ajaxurl*//*global dominantColorPickerOptions*//*jshint devel:true *//**
 * Above lines is for JSHint
 * - confirm: browser confirm box
 * - wp and ajaxurl: set by Wordpress
 * - dominantColorPickerOptions: set by inline javascript where used
 *//**
 * GLOBALS
 *
 */function isNumber(e){return!isNaN(parseFloat(e))&&isFinite(e)}function showCatImagesSaveWarning(e){jQuery(".category-images-save-warning").show();jQuery("tr[data-term="+e+"]").addClass("changed")}function updateRangeOutput(e){var t=e.val(),n=e.attr("name"),r=jQuery("output[for='"+n+"']");r.html(t+"%")}function updateImagePositions(){jQuery("#eo_theme_options\\[catimage-position-"+selectedCategory+"\\]").val(jQuery("#eo_theme_options\\[previews-position-sidebar\\]").val()+" "+jQuery("#eo_theme_options\\[previews-position-top\\]").val())}function getImagePositionAndSetToSliders(){var e=jQuery("#eo_theme_options\\[catimage-position-"+selectedCategory+"\\]").val(),t=e.split(" ");if(isNumber(t[0])&&isNumber(t[1])){jQuery("#eo_theme_options\\[previews-position-sidebar\\]").val(t[0]);jQuery("#eo_theme_options\\[previews-position-top\\]").val(t[1])}else{jQuery("#eo_theme_options\\[previews-position-sidebar\\]").val("50");jQuery("#eo_theme_options\\[previews-position-top\\]").val("50")}updateRangeOutput(jQuery("#eo_theme_options\\[previews-position-sidebar\\]"));updateRangeOutput(jQuery("#eo_theme_options\\[previews-position-top\\]"));updateImagePositions()}function updateCategoryImagePreview(e,t,n){var r='<div class="section-image" style="background-image: url(\''+currentCategoryPreviewImage+"'); background-position: "+e+"% "+t+'%;">';jQuery(n).html(r)}function updateBothCategoryImagePreviewBoxs(){updateCategoryImagePreview(50,jQuery("#eo_theme_options\\[previews-position-top\\]").val(),"#image-preview-top");updateCategoryImagePreview(jQuery("#eo_theme_options\\[previews-position-sidebar\\]").val(),50,"#image-preview-sidebar")}function openCategoryPreviewImagePositionPopup(e){var t=jQuery("#eo_theme_options\\[catimage-"+e+"\\]").val();jQuery.ajax({url:ajaxurl,type:"POST",cache:"false",data:{action:"ajax_get_category_image_from_image_id",imageid:t,imagesize:"image-1200"}}).done(function(e){currentCategoryPreviewImage=e;getImagePositionAndSetToSliders();updateBothCategoryImagePreviewBoxs();jQuery.magnificPopup.open({items:{src:"#popup-position-image",type:"inline"}},0)})}function toggleCategoryImageEditLinks(e){if(jQuery("#eo_theme_options\\[catimage-"+selectedCategory+"\\]").val().length>0){jQuery("tr[data-term="+e+"] .remove-image").show();jQuery("tr[data-term="+e+"] .position-image").show()}else{jQuery("tr[data-term="+e+"] .remove-image").hide();jQuery("tr[data-term="+e+"] .position-image").hide()}}function updateFormWithNewCategoryImageId(e,t){jQuery("#eo_theme_options\\[catimage-"+e+"\\]").val(t)}function updateCategoryImageThumbnail(e,t){jQuery.ajax({url:ajaxurl,type:"POST",cache:"false",data:{action:"ajax_get_category_image_small_preview",imageid:t}}).done(function(t){jQuery("tr[data-term="+e+"] .category-image-list-preview").html(t)})}var selectedCategory="",currentCategoryPreviewImage="";jQuery(document).on("focus",".color-input",function(){jQuery(".color-input").wpColorPicker(dominantColorPickerOptions)});jQuery(document).ready(function(){var e;jQuery(".image-select-link").click(function(t){selectedCategory=jQuery(this).data("category");t.preventDefault();if(e){e.open();return}e=wp.media.frames.file_frame=wp.media({title:"Choose Category Image",button:{text:"Choose Category Image"},multiple:!1});e.on("select",function(){var t;t=e.state().get("selection").first().toJSON();updateFormWithNewCategoryImageId(selectedCategory,t.id);updateCategoryImageThumbnail(selectedCategory,t.id);toggleCategoryImageEditLinks(selectedCategory);showCatImagesSaveWarning(selectedCategory);openCategoryPreviewImagePositionPopup(selectedCategory)});e.open()})});jQuery(function(){jQuery(".iframe-popup").magnificPopup({type:"iframe"});jQuery("input[type='range'].has-output").change(function(){updateRangeOutput(jQuery(this));updateImagePositions();showCatImagesSaveWarning(selectedCategory)});jQuery("#eo_theme_options\\[previews-position-sidebar\\]").change(function(){updateCategoryImagePreview(jQuery(this).val(),50,"#image-preview-sidebar")});jQuery("#eo_theme_options\\[previews-position-top\\]").change(function(){updateCategoryImagePreview(50,jQuery(this).val(),"#image-preview-top")});jQuery(".remove-image-link").click(function(e){e.preventDefault();selectedCategory=jQuery(this).data("category");if(confirm("Are you sure you want to remove the image for category: "+jQuery("tr[data-term="+selectedCategory+"] .category-name").text()+"?")){jQuery("#eo_theme_options\\[catimage-"+selectedCategory+"\\]").val("");jQuery("#eo_theme_options\\[catimage-position-"+selectedCategory+"\\]").val("");toggleCategoryImageEditLinks(selectedCategory);showCatImagesSaveWarning(selectedCategory);jQuery("tr[data-term="+selectedCategory+"] .category-image-list-preview").html("")}});jQuery(".position-image-link").click(function(e){e.preventDefault();selectedCategory=jQuery(this).data("category");openCategoryPreviewImagePositionPopup(selectedCategory)});jQuery(document).on("click",".category-image-table-preview",function(){jQuery("#popup-preview-only-image").html('<img class="preview-big-cat-image" src="'+jQuery(this).data("full")+'">');jQuery.magnificPopup.open({items:{src:"#popup-preview-only-image",type:"inline"},closeOnContentClick:!0},0)});jQuery(".save-settings-link").click(function(){jQuery("#category-images-form").submit()});jQuery(".fade").delay(2e3).slideUp(400)});